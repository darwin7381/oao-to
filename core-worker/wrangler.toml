#:schema node_modules/wrangler/config-schema.json
name = "oao-to-core"
main = "src/index.ts"
compatibility_date = "2024-09-28"
compatibility_flags = ["nodejs_compat"]

# 本地開發設定
# 注意：Wrangler 4.x 不支援 persist_to
# 多 Worker 共享 KV 的解決方案見 MULTI_WORKER_LOCAL_DEV_GUIDE.md

# 自訂域名：oao.to
routes = [
	{ pattern = "oao.to", custom_domain = true }
]

# Workers KV - 短網址存儲（共用）
[[kv_namespaces]]
binding = "LINKS"
id = "8f133853496a4bdfb8151a39dd251518"
# 本地開發：Miniflare 自動共享（相同 ID）
# 生產部署：需要創建獨立的 prod KV

# Analytics Engine - 點擊追蹤（共用）
[[analytics_engine_datasets]]
binding = "TRACKER"
dataset = "link_clicks"

